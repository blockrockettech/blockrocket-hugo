<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>BlockRocket Tech - Blockchain Consulting Manchester</title>
    <meta content="Blockchain Engineering &amp; Consultancy based in Manchester, UK‚Ää‚Äî‚Ääwe build products and help companies understand blockchain technology, smart contracts and cryptocurrencies. www.blockrocket.tech &amp; @blockrockettech &amp; @knownorigin_io &amp; @blockchain_manc"
          name="description">
    <meta content="BlockRocket Tech - Blockchain Consulting Manchester" property="og:title">
    <meta content="Blockchain Engineering &amp; Consultancy based in Manchester, UK‚Ää‚Äî‚Ääwe build products and help companies understand blockchain technology, smart contracts and cryptocurrencies. www.blockrocket.tech &amp; @blockrockettech &amp; @knownorigin_io &amp; @blockchain_manc"
          property="og:description">
    <meta content="summary" name="twitter:card">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <link href="/css/normalize.css" rel="stylesheet" type="text/css">
    <link href="/css/webflow.css" rel="stylesheet" type="text/css">
    <link href="/css/blockrocket.webflow.css" rel="stylesheet" type="text/css">
    <link href="/css/medium.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>

    <script type="text/javascript">WebFont.load({google: {families: ['Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic', 'Varela Round:400']}});</script>
    
    <script type="text/javascript">!function (o, c) {
        var n = c.documentElement, t = ' w-mod-';
        n.className += t + 'js', ('ontouchstart' in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + 'touch');
    }(window, document);</script>
    <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon">
    <link href="/images/webclip.png" rel="apple-touch-icon">
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-113374937-1"></script>
    <script type="text/javascript">window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-113374937-1', {'anonymize_ip': false});</script>
</head>


<body>
<div class="nav-bar-div og">
    <div class="nav-bar">
        <a href="/index.html" class="link-block w-inline-block w--current">
            <img src="/images/BlockR_black_logo.png"
                 srcset="/images/BlockR_black_logo-p-500.png 500w, /images/BlockR_black_logo-p-800.png 800w, /images/BlockR_black_logo-p-1080.png 1080w, /images/BlockR_black_logo.png 1440w"
                 sizes="(max-width: 479px) 48vw, (max-width: 767px) 23vw, 120px" alt="" class="image">
        </a>

        <a href="/blog" class="link">articles</a>
        <a href="#start-a-project-form" class="main-button w-button">start a project</a>
    </div>
</div>
<div data-w-id="899949fa-97d6-356b-fd4b-0c58dede6ca6" class="nav-bar-div light-grey">
    <div class="nav-bar">
        <a href="index.html" class="w-inline-block w--current">
            <img src="/images/BlockR_black_logo.png"
                 srcset="/images/BlockR_black_logo-p-500.png 500w, /images/BlockR_black_logo-p-800.png 800w, /images/BlockR_black_logo-p-1080.png 1080w, /images/BlockR_black_logo.png 1440w"
                 sizes="100vw" alt=""
                 class="image">
        </a>
        <a href="#start-a-project-form" class="main-button w-button">start a project</a>
    </div>
</div>



<div class="main-content">
    <div class="container">
        <div class="row">
            
            <div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset">
    <p>Share</p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=The%20ERC721%20Secondary%20Sale%20Commission%20Conundrum%20%f0%9f%98%90&url=http%3a%2f%2fexample.org%2fblog%2fthe-erc721-secondary-sale-commission-conundrum%2f" onclick="window.open(this.href, 'twitter-share', 'width=550, height=435'); return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/sharing/share-offsite/?url=http%3a%2f%2fexample.org%2fblog%2fthe-erc721-secondary-sale-commission-conundrum%2f" onclick="window.open(this.href, 'twitter-share', 'width=550, height=435'); return false;">
                <i class="fab fa-linkedin"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=http%3a%2f%2fexample.org%2fblog%2fthe-erc721-secondary-sale-commission-conundrum%2f" onclick="window.open(this.href, 'facebook-share', 'width=550, height=435'); return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://reddit.com/submit?url=http%3a%2f%2fexample.org%2fblog%2fthe-erc721-secondary-sale-commission-conundrum%2f" onclick="window.open(this.href, 'facebook-share', 'width=550, height=435'); return false;">
                <i class="fab fa-reddit"></i>
            </a>
        </li>
    </ul>

    
</div>
</div>

            
            <div class="col-md-9 flex-first flex-md-unordered">
                <div class="mainheading">
                    
                    <h1 class="posttitle">The ERC721 Secondary Sale Commission Conundrum üòê</h1>
                    <p class="lead">
                        TL;DR it‚Äôs complicated!
                    </p>

                    
                    <div class="row post-top-meta">
                        <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right">
                            <img class="author-thumb" src="https://miro.medium.com/fit/c/128/128/0*S_ffs-qdOMzN8RIa." alt="Andy Gray">
                        </div>
                        <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left">
                            <a target="_blank" class="link-dark">Andy Gray</a><br>
                            <span class="author-description">
                Co-Founder of BlockRocket<br>
                <i class="far fa-star"></i>
                Nov 1, 2019
                <i class="far fa-clock clock"></i>
                4 min read
              </span>
                        </div>
                    </div>
                </div>

                
                <div class="article-post">
                    

<p>TL;DR it‚Äôs complicated!</p>

<p>At BlockRocket we build dApps and a fair few of them use non-fungible tokens (NFTs) that follow the ERC721 standard. Once the digital assets are live on the blockchain they can commonly be re-sold on secondary markets (primary being the original sale and minting of the token).</p>

<p>The majority of NFTs currently being traded on marketplaces use transfer functions that do not have any *value *exchange bar the token. Marketplaces can accept value, commonly in Ether, and reconcile payments but the asset exchange is normally the standard approve and transfer pattern.</p>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*-xUM4snahDB_qofMAe-sag.jpeg" alt="Random sales image!" /><em>Random sales image!</em></p>

<p>One feature request that keeps popping up especially from creative based projects is the need for secondary commission on resales. We spoke to <a href="http://knownorigin.io">KnownOrigin.io</a> community on this topic and they were overwhelmingly in support of vested share in future sales.
&gt; Armin Blasbichler, from TwistedSister.io, commented: ‚ÄúThe creators of an artwork should have the implicit right to partake in the appreciation of its value over time, as it is them who brought that value into the world in the first place. Such a model, automated via smart contracts on the blockchain, could open up new revenue streams for the creators and would enhance their agency and independence.‚Äù</p>

<h2 id="the-problem-s">The problem(s) üëé</h2>

<p>Right now there is one secondary market dominating the space for NFTs (because it is simple and easy to use): <a href="undefined">OpenSea</a>.</p>

<p>Unfortunately, they cannot handle payable transfers yet. OpenSea‚Äôs infrastructure currently depends on unrestricted transfer functions. In other words, if you add revenue sharing logic directly into the smart contract, they will not currently pass any associated value (in Ether), therefore, no secondary sales split would occur.
&gt; We asked the Opensea guys to review this document for accuracy. Alex Atallah, co-founder, said ‚ÄúWe‚Äôre very excited about tertiary sales at OpenSea and we‚Äôre working to support them. Reach out to us if you have an interesting use case so we can make sure our solution fits! Tertiary sales on OpenSea will be a great way to compensate creators.‚Äù</p>

<p>With <a href="undefined">OpenSea</a> you can specify to add selling and buying fees direct on the platform (and leaving the logic off the contract) so you can manufacture secondary sales but nothing stops savvy users doing OTC (over-the-counter) deals and cutting the content creator out of the deal. <a href="undefined">BoxSwap</a> is one such platform for OTC deals on NFTs.</p>

<p>So right now if you really need on-chain secondary sales you need to build your own marketplace on your dApp then you are fully in control but this seems like a backwards step for the overall interoperability of NFTs.</p>

<p>Code is law in smart contracts, so you decide you will bake the logic into the ERC721 token via the *transferFrom *(and it‚Äôs <em>safe</em> equivalents). Next problem is the two most popular frameworks, <a href="undefined">Zeppelin</a> and <a href="undefined">0xcert</a>, for extending to architect NFTs do not specify the transfer functions as *payable, <em>whereas</em>, *the <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md">EIP</a> standard does!?</p>

<p>Confused? The reasons for this are discussed here:
<a href="https://github.com/OpenZeppelin/openzeppelin-contracts/issues/1015"><strong>Consider supporting payable ERC721&rsquo;s safeTransferFrom, transferFrom, and approve ¬∑ Issue #1015 ¬∑‚Ä¶</strong>
*You can&rsquo;t perform that action at this time. You signed in with another tab or window. You signed out in another tab or‚Ä¶*github.com</a></p>

<p>It boils down to this nugget from the EIP ERC721 specification (don‚Äôt try and read this paragraph while drunk‚Ä¶):</p>

<pre><code>Mutability guarantees are, in order weak to strong: payable, implicit nonpayable, view, and pure. Your implementation MUST meet the mutability guarantee in this interface and you MAY meet a stronger guarantee. For example, a payable function in this interface may be implemented as nonpayble (no state mutability specified) in your contract.
</code></pre>

<p>Sometimes it feels like it is never easy on the Blockchain (but is that why we love it secretly? üòò)</p>

<h2 id="a-solution">A solution? ‚úä</h2>

<p>We decided to test out converting a NFT contract to use *payable *transfers like so:</p>

<pre><code>function transferFrom(address payable from, address to, uint256 tokenId) public payable {
      super.transferFrom(from, to, tokenId);

      if (msg.value &gt; 0) {
        // 10% to creator
        uint256 secondaryShare = msg.value.div(100).mul(10);
        _creatorOf(tokenId).transfer(valueToSend)

        // 90% seller
        from.transfer(msg.value - secondaryShare);
      }
    }
</code></pre>

<p>It‚Äôs a bit of pain in all honesty, our way of being able to do this was to bring in local copies of the <a href="undefined">Zeppelin</a> code and adjust the required functions and all the associated interfaces.</p>

<p>It felt hacky üò≥, but, all the tests passed so we wrote some additional unit tests to prove secondary sales values were redistributed accordingly üíö.</p>

<h2 id="conclusion">Conclusion</h2>

<p>This appears a simple objective at first but it soon gets a little complex and there is not much out there about it. It is not currently a solved problem and concessions must be made.</p>

<p>You can extend / adjust well documented libs and implement secondary sales but as <a href="undefined">OpenSea</a> don‚Äôt currently support them you are losing out on large potential sales funnel, and you will more than likely need to implement you own marketplace until they do. Bit of a stalemate really üòê.</p>

<p>In the future the situation will improve as the NFT space matures but for now you will need to pick the <em>rock</em> or the <em>hard place.</em></p>

<p><a href="https://blockrocket.tech/">BlockRocket</a> are based in Manchester and we help companies with blockchain and decentralised technology. Get in touch!</p>

<p>Email: <a href="mailto:hello@blockrocket.tech">hello@blockrocket.tech</a></p>

<p>Twitter: <a href="https://twitter.com/blockrockettech">@blockrockettech</a></p>

<p>Products we have built include <a href="http://dapp.knownorigin.io/">KnownOrigin.io</a>, <a href="http://niftyfootball.cards/">Nifty Football</a>, <a href="http://blockcities.co/">BlockCities</a>, and <a href="http://cryptokaiju.io/">Crypto Kaiju</a></p>

                </div>

                
                <div class="after-post-tags">
                    <ul class="tags">
                        
                        <li>
                            <a href="/tags/erc721">erc721</a>
                        </li>
                        
                    </ul>
                </div>
                

                
                <div class="row PageNavigation d-flex justify-content-between" style="padding-bottom: 30px">
                    <div class="col col-md-6">
                        
                        <a class="d-block" href="/blog/daosaka-the-facts-and-figures/"> &laquo; DAOSaka: The facts and figures</a>
                        
                    </div>
                    <div class="col col-md-6">
                        
                        <a class="d-block text-lg-right" href="/blog/a-brave-new-world-blockchain-and-the-emergence-of-web-3/">A brave new world: blockchain and the emergence of Web 3.0 &raquo;</a>
                        
                    </div>
                    <div class="clearfix"></div>
                </div>
                
            </div>
            
        </div>
    </div>
    
</div>


<div class="cta-section" id="start-a-project-form" data-scroll-time="0">
    <div class="section-title">Join the decentralised movement</div>
    <div class="mt-5 contact-form">
        <form action="https://formspree.io/mwkperaj"
              method="POST" class="form">
            <label>
                <span class="form-label">Name</span>
                <div class="mt-1">
                    <input class="form-control"
                           type="text"
                           placeholder="Alan Turing"
                           name="contactName">
                </div>
            </label>
            <label class="mt-4">
                <span class="form-label">Email address</span>
                <div class="mt-1">
                    <input class="form-control"
                           type="text"
                           placeholder="you@email.com"
                           name="contactEmail">
                </div>
            </label>
            <label class="mt-4">
                <span class="form-label">Project Brief</span>
                <div class="mt-1">
                        <textarea class="form-control"
                                  name="projectBrief"
                                  placeholder="What are you working on? How can we help?"
                                  rows="5"></textarea>
                </div>
            </label>
            <button type="submit" class="main-button w-button">Submit</button>
        </form>
    </div>
</div>

<div class="section color no-padding-vertical">
    <div class="wrapper text-white">
        <div class="footer-2">
            <div class="footer-left"><a href="#" class="footer-brand w-nav-brand"><img
                    src="/images/BlockR_black_logo.png" width="125"
                    srcset="/images/BlockR_black_logo-p-500.png 500w, images/BlockR_black_logo-p-800.png 800w, images/BlockR_black_logo-p-1080.png 1080w, images/BlockR_black_logo.png 1440w"
                    sizes="125px" alt="" class="image-10"></a></div>
            <div class="footer-nav"><a href="mailto:human@blockrocket.tech?subject=Blockchain%20Project"
                                       class="link footer">human@blockrocket.tech</a></div>
            <div class="footer-social"><a href="https://www.linkedin.com/company/blockrockettech/" target="_blank"
                                          class="footer-social-link w-inline-block"><img src="/images/61109.png"
                                                                                         width="15" alt=""
                                                                                         class="image-6"></a><a
                    href="https://twitter.com/blockrockettech" target="_blank"
                    class="footer-social-link w-inline-block"><img src="/images/23931.png" width="15" alt=""></a><a
                    href="https://medium.com/blockrocket" target="_blank"
                    class="footer-social-link w-inline-block"><img src="/images/medium-1.svg" width="15" alt=""></a>
            </div>
            <div class="footer-bottom">
                <div class="footer-bottom-left">
                    <div class="text-block">BlockRocket Limited (company no. 11229039)</div>
                </div>
                <div class="footer-bottom-right"></div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
